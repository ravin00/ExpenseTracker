# ──────────────────────────────────────────
# Global Configuration
# ──────────────────────────────────────────
global:
  image:
    registry: ravinbanda
    repository: spendwise
    pullPolicy: IfNotPresent
# ──────────────────────────────────────────
# PostgreSQL
# ──────────────────────────────────────────
postgres:
  enabled: true # Set false when using managed DB in prod
  image: postgres:16-alpine
  storage: 5Gi
  storageClassName: "" # Uses default StorageClass
  user: postgres
  database: expensetracker
  port: 5432
# External DB (used when postgres.enabled = false)
externalDatabase:
  host: ""
  port: 5432
  user: postgres
# ──────────────────────────────────────────
# Database Names
# ──────────────────────────────────────────
databases:
  auth: authservice
  expense: expenseservice
  category: categoryservice
  budget: budgetservice
  savingsGoal: savingsgoalservice
  analytics: analyticsservice
# ──────────────────────────────────────────
# JWT Configuration
# ──────────────────────────────────────────
jwt:
  issuer: ExpenseTrackerAPI
  audience: ExpenseTrackerClient
# ──────────────────────────────────────────
# Auth Service
# ──────────────────────────────────────────
authService:
  name: auth-service
  tag: auth-service-latest
  replicas: 2
  port: 8080
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi
  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 5
    targetCPU: 70
# ──────────────────────────────────────────
# Expense Service
# ──────────────────────────────────────────
expenseService:
  name: expense-service
  tag: expense-service-latest
  replicas: 2
  port: 8080
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi
  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 5
    targetCPU: 70
# ──────────────────────────────────────────
# Category Service
# ──────────────────────────────────────────
categoryService:
  name: category-service
  tag: category-service-latest
  replicas: 2
  port: 8080
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi
  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 4
    targetCPU: 70
# ──────────────────────────────────────────
# Budget Service
# ──────────────────────────────────────────
budgetService:
  name: budget-service
  tag: budget-service-latest
  replicas: 2
  port: 8080
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi
  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 4
    targetCPU: 70
# ──────────────────────────────────────────
# Savings Goal Service
# ──────────────────────────────────────────
savingsGoalService:
  name: savings-goal-service
  tag: savings-goal-service-latest
  replicas: 2
  port: 8080
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi
  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 4
    targetCPU: 70
# ──────────────────────────────────────────
# Analytics Service
# ──────────────────────────────────────────
analyticsService:
  name: analytics-service
  tag: analytics-service-latest
  replicas: 2
  port: 8080
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi
  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 5
    targetCPU: 70
# ──────────────────────────────────────────
# Ingress
# ──────────────────────────────────────────
ingress:
  enabled: true
  className: nginx
  ignoreHealthCheck: false
  host: api.spendwise.local
  tls:
    enabled: false
    secretName: spendwise-tls
# ──────────────────────────────────────────
# Environment
# ──────────────────────────────────────────
environment: Development
# ──────────────────────────────────────────
# Secrets
# ──────────────────────────────────────────
secrets:
  existingSecretName: spendwise-secrets
# ──────────────────────────────────────────
# Pod Security
# ──────────────────────────────────────────
podSecurityContext:
  runAsNonRoot: true
  seccompProfile:
    type: RuntimeDefault

containerSecurityContext:
  allowPrivilegeEscalation: false
  readOnlyRootFilesystem: false
  capabilities:
    drop:
      - ALL
